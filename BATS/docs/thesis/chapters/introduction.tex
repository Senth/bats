% !TEX root = ../main.tex
\chapter{Introduction}
Have you ever wanted to be the boss over your teammate bot\footnote{A bot is a computer player that you either can play with or against} in a game? No!? Then you can stop reading.

Today you can find a few Real-Time Strategy (RTS) games—younger than 5 years old—but none of these lets you control your teammate bot, let alone collaborate with it—at least not to our knowledge; includes research, where we have yet to find a single subject on communication between human player and bot.

Our focus lies in evaluating if it is worthwhile to do further research in this unexplored area, both for the purpose of researchers and for game developers to help them decide if they shall invest money in a collaborative teammate bot for RTS games.

To familiarize you with RTS games, StarCraft, and collaborative game bots a brief description on all subjects is given below. Once you have basic knowledge of the subjects we will give a thorough background what others have done in closely related subjects. Then a detailed description of the methods we used are described; this includes implementation on the bot, why it was implement this way, and how it was evaluated. Next the results of our tests, and our conclusions are presented; and finally we present new subjects of future work.

\section{RTS}
An RTS game is a computer game that heavily relies on strategy and fast execution. An analogy would be to play chess where both you and your opponent can move pieces at the same time, you will only see your own pieces and a tile beside them—meaning you do not know the location of the opponent’s pieces or when s/he makes a move—on top of that you have to think of a strategy fast before your opponent gets a lead.

In reality, RTS games resembles more a battle field than a game of chess—you control the army (its unit) and what to spend the resources on. At the start of the game you have a single base and your goal is to build up the technology to create powerful units by collecting resources, but often you cannot go straight for the best technology. it takes time and resources to build up all necessary technology and if you only focus on technology you will not have any units to defend if the enemy comes with an attack.

In most, if not all, RTS games the player can choose whether s/he wants to play a campaign, usually accompanied with a story, or simply skirmish games. A skirmish game is in its simplest form a quick battle where both you and your enemy or enemies start with the same amount of resources and structures. Many variants of skirmish games can be played; this thesis will focus on team skirmishes, more specific teams of 2 players versus 2 players. One human and this bot in one team, and two standard AIs in the other team. How this will work is explained throughout the thesis.

There is no real standard for RTS games, they all work a bit different from each other. Instead of covering all different types of RTS games a short description how StarCraft works will be given to make the reader familiar with the game before talking about more specific problems and solutions.

\subsection{StarCraft}
The AI is implemented in an RTS game: StarCraft, more specifically StarCraft: Brood War—an expansion to StarCraft that introduced new units. Henceforth StarCraft: Brood War will be referenced as StarCraft for simplicity. The StarCraft description below was gathered both from the StarCraft manual, StarCraft wiki, and the our observations in gameplay. E.g. to test whether Protoss shields regenerated in battle, we created a single player game a probe was sent to attack another probe and we observed that shields were regenerating since the probe’s shield points did regenerate (increase) in battle.

%: Reference SC manual etc


%: Import a StarCraft image

\subsubsection{Gameplay}
StarCraft has three races—Terran, Protoss, and Zerg—which the player can choose from. Each of these races have their own unique type of units and their play styles vary, especially Zerg.

\paragraph{Commonalities between races}
All races have worker units that collect minerals and gas—minerals and gas are the games resources used to build structures, units and upgrades. Minerals and gas are usually located in clusters of several mineral fields and occasionally a Vespene geyser (gas). The player always starts at a base with both mineral fields and a Vespene geyser. To mine minerals and gas workers go to the fields and then return to the closest main structure of the player. Because of the travel distance you usually want to build a new main structure near resource clusters.

Mineral fields have a fixed number of resources they can yield; when all have been depleted the mineral field disappears. A Vespene geyser on the other hand does not disappear after depletion, instead each worker now brings back 2 units of gas each turn, instead of 8. To be able to mine gas in the first place an additional structure needs to be placed on a Vespene geyser. Only one worker can simultaneously collect minerals from a mineral field, or gas from a gas depot, other workers are automatically queued to start mining when the first worker brings back the resources.

StarCraft limits the number of units one can have to 200 supply\footnote{It’s called Psi for Protoss, and Control for Zerg which makes more sense on those unit. Supply is, however, more commonly used jargon for all races.}. Each unit occupies some supply, ranging from a half supply (Zerglings) to six supplies (Carriers), armed nuclear silos take up 8 supplies. In general, the better the unit the more supply it takes. The player starts with 9 to 10 max supply (depending on the race). To increase the max supply a special structure (unit for Zerg) can be built; main bases also generate supply, 10 for Terran Command Center, 9 for Protoss Nexus, and 1 for Zerg Hatchery.

\paragraph{Constructing Structures}
Terran's worker unit, SCV,  When an SCV constructs a structure it becomes occupied and cannot do anything else; it can still be targeted, and can stop building and let another SCV take over—this can be the case when an enemy attacks the SCV.

Zerg’s worker unit, Drone, will morph itself into a structure. The drone will disappear once the morphing stage begins, but if the player cancels the building progress the drone will reappear. Once the morph completes the drone is forever lost. Zerg structures need to be placed on creep which Hatcheries and colonies help to spread; exceptions are Hatcheries and Extractors (for Vespene Geyser).

Protoss’s worker unit, Probe, need to construct structures in a psionic power grid, a circle grid generated by Pylon structures; exceptions are Nexuses, Pylons, and Refineries (for Vespene geyser). If a structure becomes unpowered it will not function again until a nearby Pylon is reconstructed to create a new psionic power grid. Ones a structure has been planted, it will construct itself leaving the Probe free for other tasks.

\paragraph{Constructing Units}
Terran and Protoss function in basically the same way: they both have separate unit producing structures for different kinds of units, e.g. Barracks/Gateway for basic ground units, Starport/Stargate for flying units, and so forth. All units, however, cannot be built from these structures directly, some units require another stand-alone structure, like Acadamy for Firebats and Medics. The main structure (Command Center and Nexus) can only build workers. Only one unit can be built simultaneously from these structures, if one wants a huge production of units, massive amount of unit producing structures are needed.

Zerg on the other hand only has one unit producing structure, the Hatchery, that pops out larvae in a certain time interval—one Hatchery can maximum have three larvae. These larvae are then morphed into the unit of choice. To build other units than Drones and Overlords one must build the structure needed for the unit, e.g. building a Spawning Pool to be able to build Zerglings from a Hatchery, in a similar way Acadamy is needed for building Firebats from a Barracks. This makes Zerg good for creating lots of better units with a minimum extra cost, since it only needs one extra building and some Hatcheries. E.g. if Zerg has 3 Hatcheries it can save its larva and when the new building is complete it can directly start producing 9 of the new units. Whereas Terran needs to build 9 Barracks, Factories, or Starports (depending on the unit) to have the same rate of production.

%: Mention acyclic graph
While it seems most obvious to build “the best” units at the beginning, this is not possible. The “best” units, although there is no such thing as best as all units are good depending on the situation, require certain structures, that in turn require other structures. For example, to build a Carrier one requires a Fleet Becon (for the Carrier tech) and a Stargate (to build the unit), the Stargate then requires a Cybernetics core, the Cybernetics core requires a Gateway and a Gateway requires a Nexus. As you might conclude, you need a lot of resources and time to be able to build a Carrier; if you go straight for Carriers your enemy can just waltz into the base with any number of units and kill the entire base.

\paragraph{Unit Health}
Each race unit health work a bit different. Terran units do not generate health. Mechanical units (both ground and air) and structures can be repaired by an SCV at the cost of minerals and gas, depending on what resources were required to build the unit or structure; an SCV can also repair another SCV since they are vehicles. Biological units, such as marines and medics can only restore lost hit points (HP) by medics which have a healing ability that restores 2 HP per 1 energy; this ability can be cast every second. In addition medics have the ability to heal Protoss and Zerg biological units—which makes it a good team race.

All Zerg units and structures automatically regenerates health at a very slow rate, even during battle, but as the regeneration is slow units usually only have the time to heal 1 or 2 HP during a battle.

Protoss units are a bit special, they have two health bar, one being the health and one being shields. Usually these are divided by half, meaning units have equal amount of health as shields, an exception is Archons which have 10 HP and 350 shield points (SP). Shields regenerate much faster than Zerg’s regeneration ability, including in battle, but always takes full damage from all damage types. Terran Science Vessels can drain all the shield instantly through its EMP ability. Shields can, however, be fully recharged by protoss support structure, shield battery, which converts its energy to shields, just as medics can heal biological units.

\subsection{Why StarCraft?}
\marginpar{Move “Why StarCraft?” to Background?}
Why choose StarCraft and not another RTS game? Other games, or engines, the AI could be implemented in is SpringRTS\cite{springrts} which is an RTS game engine, it is by itself not a game and requires a game mod\footnote{A game mod in this case is the set of rules, units, graphics, to create a new RTS game.}, which there are plenty of. ORTS\cite{orts} is aimed for developers and researching, and finally, Wargus\cite{wargus}, a WarCraft II clone that allows for modifications and implementation of an AI. So why not choose one of these instead of StarCraft?

\paragraph{Carefully balanced}
Blizzard Entertainment released StarCraft: Brood War in 1998 and continued to patch it until beginning of 2009.
%: Cite patching
The other games have neither had the time nor the amount of players to carefully balance the game. One factor might be because StarCraft has become a huge sport in South Korea\cite{scKotakuKorea}.

\paragraph{Easy to find experienced players}
Because StarCraft have been around for so long and is a commercial successful game it is easy to find experienced players to test the game. By using experienced players as testers, the players do not have to learn the game mechanics and can focus on evaluating the bot instead of the game.

\paragraph{Big community}
StarCraft has a big community, this makes it easy to find and ask people what functionality they would like to see in a teammate bot to gain more ideas, but also evaluate our ideas.

\paragraph{Extending an already existing bot} We have the opportunity to extend an already existing bot, BTHAI\cite{bthai}, for BWAPI\cite{bwapi}. By extending a bot we can focus on making the bot a good teammate and not worry about all the other details; such as good path finding, building placement. Sometimes we, however, improve some already existing systems, e.g. build order, to meet our needs, but we do not have to build the entire system from scratch. In addition, BTHAI is developed by our supervisor, Hagelbäck, and we can therefore get fast help of the system if needed. While we have not searched for other bots to extended, we figured it would be hard to top the support we would get from BTHAI.

\section{Teammate}
A teammate is a player, either human or bot, that helps the team towards a common goal. Teammate bots often prioritize the human player because it is their experience, thus it is more the bot helps the player then the team.

\subsection{Human teammate}
You can divide human teams into essentially two groups. Where players more or less cooperate with each other and teams whose players “do their own thing” not caring about what the others do. It is a gray scale, and often players do not only cooperate or only do their own thing, but instead it varies throughout the gameplay.

Humans are good at forming complex strategies, or at least complex to program an AI to understand what to do. They can come and aid their teammate intuitively without the teammate asking for help.

When playing together with other humans, communication is important. If verbal communication is possible, players can tell their intentions to the teammates—e.g. attacking, defending, moving—other important game changes—e.g. enemy missing, getting shot, spotting an enemy—or just requesting help. When the player cannot communicate verbally, text messages through the games is often possible, but this can disrupt gameplay since actions are often disabled while typing (depending on the game). Short text messages are often sent instead to convey the entire message; e.g. “attack” instead of “I’m going to attack the enemy base from this side, join me.” 

\paragraph{StarCraft}
In StarCraft, players that know each other usually decide what strategy to use before starting the game, whereas if the players do not know each other they talk about what common strategy to use, announce their strategies, or both. If verbal communication is possible, players like to talk about tactics during the game, they like to convey their intentions to the teammate player.

\subsection{AI teammate}

\paragraph{StarCraft}
The standard AI in StarCraft, does not interact with the player in team matches. It acts on its own and tries to win the game by its own, not helping the player or taking help from the player.
%: Check if this is actually true in the game